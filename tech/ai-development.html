<!DOCTYPE html>
<html lang="en-US">
  
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AI Development | Isayah Young Burke</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Comprehensive guide to AI integration, ElevenLabs API, and production implementations">
    
    <link rel="preload" href="../assets/css/styles.css" as="style">
    <link rel="preload" href="../assets/js/app.js" as="script">
    <link rel="preload" href="../assets/js/vendor.js" as="script">
    <link rel="preload" href="../assets/js/page.js" as="script">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/custom.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="https://zaylegend.com/" class="home-link router-link-active"><!----> <span class="site-name">Isayah Young Burke</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://zaylegend.com/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="../index.html" class="nav-link router-link-active">
  Knowledge
</a></div><div class="nav-item"><a href="https://zaylegend.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Subscribe
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/zaylegend" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4-4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://zaylegend.com/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="../index.html" class="nav-link router-link-active">
  Knowledge
</a></div><div class="nav-item"><a href="https://zaylegend.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Subscribe
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/zaylegend" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a class='sidebar-link' href='../chess.html'>Chess</a></li><li><a class='sidebar-link' href='../climbing.html'>Climbing</a></li><li><a class='sidebar-link' href='../consciousness.html'>Consciousness</a></li><li><a class='sidebar-link' href='../languages.html'>Languages</a></li><li><a class='sidebar-link' href='../mathematics.html'>Mathematics</a></li><li><a class='sidebar-link' href='../meditation.html'>Meditation</a></li><li><a class='sidebar-link' href='../mimetic-theory.html'>Mimetic Theory</a></li><li><a class='sidebar-link' href='../music.html'>Music</a></li><li><a class='sidebar-link' href='../physics.html'>Physics</a></li><li><a class='sidebar-link' href='../public-speaking.html'>Public Speaking</a></li><li><a class='sidebar-link' href='../pyrolysis.html'>Pyrolysis</a></li><li><a class='sidebar-link' href='../relationships.html'>Relationships</a></li><li><a class='sidebar-link' href='../soil.html'>Soil Health</a></li><li><a class='sidebar-link' href='../space.html'>Space</a></li><li><a class='sidebar-link' href='../trees.html'>Trees</a></li><li><a class='sidebar-link' href='../writing.html'>Writing</a></li><li><a class='sidebar-link' href='../zoology.html'>Zoology</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Tech</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a aria-current='page' class='active sidebar-link' href='ai-development.html'>AI Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a class='sidebar-link' href='ai-development.html#elevenlabs-integration'>ElevenLabs Integration</a></li><li class="sidebar-sub-header"><a class='sidebar-link' href='ai-development.html#conversational-ai-setup'>Conversational AI Setup</a></li><li class="sidebar-sub-header"><a class='sidebar-link' href='ai-development.html#music-generation-with-ai'>Music Generation</a></li><li class="sidebar-sub-header"><a class='sidebar-link' href='ai-development.html#real-world-problem-solving'>Problem Solving</a></li></ul></li><li><a class='sidebar-link' href='awesome-list.html'>Awesome List</a></li><li><a class='sidebar-link' href='bash-profile.html'>MacOS Bash Profile</a></li><li><a class='sidebar-link' href='development-workflows.html'>Development Workflows</a></li><li><a class='sidebar-link' href='docker.html'>Docker Cheatsheet</a></li><li><a class='sidebar-link' href='html-cheatsheet.html'>HTML Cheatsheet</a></li><li><a class='sidebar-link' href='macos-tips.html'>MacOS tips</a></li><li><a class='sidebar-link' href='mental-models.html'>Mental Models</a></li><li><a class='sidebar-link' href='postgresql.html'>PostgreSQL cheatsheet</a></li><li><a class='sidebar-link' href='postgres-data.html'>Loading JSON into Postgres</a></li><li><a class='sidebar-link' href='regex.html'>Regex Cheatsheet</a></li><li><a class='sidebar-link' href='secrets-management-sops.html'>Secrets management - SOPS</a></li><li><a class='sidebar-link' href='seo.html'>SEO Cheatsheet</a></li><li><a class='sidebar-link' href='session-recaps.html'>Session Recaps</a></li><li><a class='sidebar-link' href='today-i-learned.html'>Today I Learned</a></li><li><a class='sidebar-link' href='vscode-snippets.html'>VSCode Snippets</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Business</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a class='sidebar-link' href='../business/hiring.html'>Hiring</a></li><li><a class='sidebar-link' href='../business/management.html'>Management</a></li><li><a class='sidebar-link' href='../business/sales.html'>Sales</a></li><li><a class='sidebar-link' href='../business/marketing.html'>Marketing</a></li><li><a class='sidebar-link' href='../business/fundraising.html'>Fundraising</a></li><li><a class='sidebar-link' href='../business/resources.html'>Startup Resources</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Levels</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a class='sidebar-link' href='../levels/business.html'>Business</a></li><li><a class='sidebar-link' href='../levels/life.html'>Life</a></li><li><a class='sidebar-link' href='../levels/leadership.html'>Leadership</a></li><li><a class='sidebar-link' href='../levels/learning.html'>Learning</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Philosophy</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a class='sidebar-link' href='../philosophy/ethics.html'>Ethics</a></li><li><a class='sidebar-link' href='../philosophy/buddhism.html'>Buddhism</a></li><li><a class='sidebar-link' href='../philosophy/stoicism.html'>Stoicism</a></li><li><a class='sidebar-link' href='../philosophy/desire.html'>Desire</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>People</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a class='sidebar-link' href='../people.html'>People</a></li><li><a class='sidebar-link' href='../people/lee-kuan-yew.html'>Lee Kuan Yew</a></li><li><a class='sidebar-link' href='../people/jensen-huang.html'>Jensen Huang</a></li><li><a class='sidebar-link' href='../people/elon-musk.html'>Elon Musk</a></li><li><a class='sidebar-link' href='../people/marlon-brando.html'>Marlon Brando</a></li><li><a class='sidebar-link' href='../people/nelson-mandela.html'>Nelson Mandela</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Courses</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a class='sidebar-link' href='../courses/mindfulness.html'>Mindfulness Course</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ai-development"><a href="#ai-development" class="header-anchor">#</a> AI Development</h1> <p>A comprehensive guide to integrating AI technologies into web applications, based on real-world implementations and production deployments.</p> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>This guide covers practical AI integration patterns, focusing on conversational AI, music generation, and text-to-speech implementations. All examples are based on actual production deployments in the zaylegend.com portfolio.</p> <p><strong>Contents</strong></p> <p></p><div class="table-of-contents"><ul><li><a href="#elevenlabs-integration">ElevenLabs Integration</a></li><li><a href="#conversational-ai-setup">Conversational AI Setup</a></li><li><a href="#music-generation-with-ai">Music Generation with AI</a></li><li><a href="#real-world-problem-solving">Real-World Problem Solving</a></li><li><a href="#common-issues--solutions">Common Issues & Solutions</a></li></ul></div><p></p> <h2 id="elevenlabs-integration"><a href="#elevenlabs-integration" class="header-anchor">#</a> ElevenLabs Integration</h2> <h3 id="api-client-setup"><a href="#api-client-setup" class="header-anchor">#</a> API Client Setup</h3> <p>The modern approach uses the official <code>@elevenlabs/client</code> SDK:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ElevenLabsClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@elevenlabs/client'</span><span class="token punctuation">;</span>

<span class="token comment">// Lazy initialization with fallback API key</span>
<span class="token keyword">let</span> elevenlabsClient<span class="token operator">:</span> ElevenLabsClient <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-definition function">getElevenLabsClient</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elevenlabsClient<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> apiKey <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_ELEVENLABS_API_KEY</span> <span class="token operator">||</span> <span class="token string">'fallback_key'</span><span class="token punctuation">;</span>
    elevenlabsClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ElevenLabsClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span> apiKey <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> elevenlabsClient<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Key Learning</strong>: Always use lazy initialization to prevent constructor errors during build time.</p> <h3 id="text-to-speech-implementation"><a href="#text-to-speech-implementation" class="header-anchor">#</a> Text-to-Speech Implementation</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-definition function">generateSpeech</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  voiceId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'EXAVITQu4vr4xnSDxMaL'</span>
<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">getElevenLabsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> audioStream <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span>textToSpeech<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>voiceId<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      text<span class="token punctuation">,</span>
      model_id<span class="token operator">:</span> <span class="token string">"eleven_multilingual_v2"</span><span class="token punctuation">,</span>
      voice_settings<span class="token operator">:</span> <span class="token punctuation">{</span>
        stability<span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
        similarity_boost<span class="token operator">:</span> <span class="token number">0.75</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Convert stream to ArrayBuffer for browser compatibility</span>
    <span class="token keyword">const</span> chunks<span class="token operator">:</span> <span class="token builtin">Uint8Array</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> reader <span class="token operator">=</span> audioStream<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> done<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
      chunks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> audioBuffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>chunks<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> chunk<span class="token punctuation">)</span> <span class="token operator">=></span> acc <span class="token operator">+</span> chunk<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunk <span class="token keyword">of</span> chunks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      audioBuffer<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>chunk<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
      offset <span class="token operator">+=</span> chunk<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> audioBuffer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Speech generation error:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Failed to generate speech'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="music-generation-api"><a href="#music-generation-api" class="header-anchor">#</a> Music Generation API</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-definition function">generateMusic</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>
  prompt<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  durationMs<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">30000</span><span class="token punctuation">,</span>
  includeVocals<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">getElevenLabsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Parameter structure is critical - use camelCase</span>
    <span class="token keyword">const</span> requestBody <span class="token operator">=</span> <span class="token punctuation">{</span>
      prompt<span class="token punctuation">,</span>
      musicLengthMs<span class="token operator">:</span> durationMs<span class="token punctuation">,</span> <span class="token comment">// NOT music_length_ms</span>
      forceInstrumental<span class="token operator">:</span> <span class="token operator">!</span>includeVocals<span class="token punctuation">,</span>
      modelId<span class="token operator">:</span> <span class="token string">"music_v1"</span><span class="token punctuation">,</span>
      respectSectionsDurations<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span>music<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>requestBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">streamToArrayBuffer</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token optional-chain">?.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'copyrighted'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Content may contain copyrighted material. Try a different prompt.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Critical Detail</strong>: ElevenLabs API uses <code>musicLengthMs</code> (camelCase) not <code>music_length_ms</code> (snake_case). This was discovered through debugging production issues.</p> <h2 id="conversational-ai-setup"><a href="#conversational-ai-setup" class="header-anchor">#</a> Conversational AI Setup</h2> <h3 id="modern-implementation-architecture"><a href="#modern-implementation-architecture" class="header-anchor">#</a> Modern Implementation Architecture</h3> <div class="language-text extra-class"><pre class="language-text"><code>Frontend (Conversation SDK)
    ↓
    GET /api/signed-url (Backend)
    ↓
    ElevenLabs Conversational AI (Direct WebSocket)
</code></pre></div><h3 id="backend-authentication-endpoint"><a href="#backend-authentication-endpoint" class="header-anchor">#</a> Backend Authentication Endpoint</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Express.js endpoint for secure authentication</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/signed-url'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> signedUrl <span class="token operator">=</span> <span class="token keyword">await</span> elevenlabs<span class="token punctuation">.</span>convos<span class="token punctuation">.</span><span class="token function">getSignedUrl</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">agent_id</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ELEVEN_LABS_AGENT_ID</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> signedUrl <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token string">'Failed to get signed URL'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="music-generation-with-ai"><a href="#music-generation-with-ai" class="header-anchor">#</a> Music Generation with AI</h2> <h3 id="contextual-music-creation"><a href="#contextual-music-creation" class="header-anchor">#</a> Contextual Music Creation</h3> <p>The key innovation is generating music that reflects the user's actual musical context:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token function-definition function">generateContextualMusic</span> <span class="token operator">=</span> <span class="token punctuation">(</span>chordProgression<span class="token punctuation">,</span> selectedGenre<span class="token punctuation">,</span> selectedKey<span class="token punctuation">,</span> selectedScale<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chordNames <span class="token operator">=</span> chordProgression<span class="token punctuation">.</span>chords<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">chord</span> <span class="token operator">=></span> chord<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> moodDescription <span class="token operator">=</span> selectedScale <span class="token operator">===</span> <span class="token string">'minor'</span> <span class="token operator">?</span> <span class="token string">'contemplative and emotional'</span> <span class="token operator">:</span> <span class="token string">'uplifting and bright'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> genreInfo <span class="token operator">=</span> genres<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">g</span> <span class="token operator">=></span> g<span class="token punctuation">.</span>id <span class="token operator">===</span> selectedGenre<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Create a </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>moodDescription<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>selectedGenre<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> composition in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>selectedKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>selectedScale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 
          featuring the chord progression: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chordNames<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>genreInfo<span class="token optional-chain">?.</span>description<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">. 
          Medium tempo, professional arrangement. </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>includeVocals <span class="token operator">?</span> <span class="token string">'Include subtle vocal harmonies'</span> <span class="token operator">:</span> <span class="token string">'Pure instrumental'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="real-world-problem-solving"><a href="#real-world-problem-solving" class="header-anchor">#</a> Real-World Problem Solving</h2> <h3 id="case-study-elevenlabs-api-constructor-error"><a href="#case-study-elevenlabs-api-constructor-error" class="header-anchor">#</a> Case Study: ElevenLabs API Constructor Error</h3> <p><strong>Problem</strong>: <code>Lq.ElevenLabsApi is not a constructor</code><br>
<strong>Investigation</strong>: Discovered incorrect class name in documentation<br>
<strong>Solution</strong>: Use <code>ElevenLabsClient</code> instead of <code>ElevenLabsApi</code></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// ❌ Wrong (from outdated docs)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElevenLabsApi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@elevenlabs/client'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ElevenLabsApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span> apiKey <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ Correct</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElevenLabsClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@elevenlabs/client'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ElevenLabsClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span> apiKey <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="case-study-duration-parameter-not-respected"><a href="#case-study-duration-parameter-not-respected" class="header-anchor">#</a> Case Study: Duration Parameter Not Respected</h3> <p><strong>Problem</strong>: Generated music ignored duration settings<br>
<strong>Investigation</strong>: API calls succeeded but duration was always ~30 seconds<br>
<strong>Solution</strong>: Parameter naming convention fix</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// ❌ Wrong (snake_case)</span>
<span class="token punctuation">{</span>
  music_length_ms<span class="token operator">:</span> <span class="token number">60000</span>
<span class="token punctuation">}</span>

<span class="token comment">// ✅ Correct (camelCase)  </span>
<span class="token punctuation">{</span>
  musicLengthMs<span class="token operator">:</span> <span class="token number">60000</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Learning</strong>: Always verify API parameter naming conventions in official documentation, not community examples.</p> <h3 id="case-study-volume-disparity-issues"><a href="#case-study-volume-disparity-issues" class="header-anchor">#</a> Case Study: Volume Disparity Issues</h3> <p><strong>Problem</strong>: Generated AI music was much louder than chord progression playback<br>
<strong>Investigation</strong>: Audio context volume levels were extremely low (0.008-0.015)<br>
<strong>Solution</strong>: Increased base volume 15-20x and adjusted compression</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Before (too quiet)</span>
<span class="token keyword">const</span> baseVolume <span class="token operator">=</span> preview <span class="token operator">?</span> <span class="token number">0.008</span> <span class="token operator">:</span> <span class="token number">0.015</span><span class="token punctuation">;</span>

<span class="token comment">// After (audible)</span>
<span class="token keyword">const</span> baseVolume <span class="token operator">=</span> preview <span class="token operator">?</span> <span class="token number">0.15</span> <span class="token operator">:</span> <span class="token number">0.25</span><span class="token punctuation">;</span>

<span class="token comment">// Also adjusted compressor settings</span>
compressorRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>threshold<span class="token punctuation">.</span><span class="token function">setValueAtTime</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span> audioContext<span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
compressorRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>ratio<span class="token punctuation">.</span><span class="token function">setValueAtTime</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> audioContext<span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="common-issues--solutions"><a href="#common-issues--solutions" class="header-anchor">#</a> Common Issues & Solutions</h2> <h3 id="api-key-configuration-in-docker"><a href="#api-key-configuration-in-docker" class="header-anchor">#</a> API Key Configuration in Docker</h3> <p><strong>Issue</strong>: Environment variables not available during Docker build<br>
<strong>Solution</strong>: Use build arguments</p> <div class="language-dockerfile extra-class"><pre class="language-dockerfile"><code><span class="token comment"># Dockerfile</span>
<span class="token instruction"><span class="token keyword">ARG</span> VITE_ELEVENLABS_API_KEY=your_fallback_key</span>
<span class="token instruction"><span class="token keyword">ENV</span> VITE_ELEVENLABS_API_KEY=<span class="token variable">${VITE_ELEVENLABS_API_KEY}</span></span>

<span class="token comment"># Build command</span>
docker build --build-arg VITE_ELEVENLABS_API_KEY=your_actual_key -t app .
</code></pre></div><h3 id="browser-audio-compatibility"><a href="#browser-audio-compatibility" class="header-anchor">#</a> Browser Audio Compatibility</h3> <p><strong>Issue</strong>: Streams don't work directly in browsers<br>
<strong>Solution</strong>: Convert to ArrayBuffer</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token function-definition function">streamToArrayBuffer</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>stream<span class="token operator">:</span> ReadableStream<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ArrayBuffer<span class="token operator">></span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chunks<span class="token operator">:</span> <span class="token builtin">Uint8Array</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> done<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    chunks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> totalLength <span class="token operator">=</span> chunks<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> chunk</span><span class="token punctuation">)</span> <span class="token operator">=></span> acc <span class="token operator">+</span> chunk<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>totalLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunk <span class="token keyword">of</span> chunks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>chunk<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
    offset <span class="token operator">+=</span> chunk<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result<span class="token punctuation">.</span>buffer<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="resources"><a href="#resources" class="header-anchor">#</a> Resources</h2> <ul><li><a href="https://elevenlabs.io/docs" target="_blank" rel="noopener noreferrer">ElevenLabs API Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="../session-recaps.html">Session Recap: ElevenLabs Integration</a></li><li><a href="https://github.com/elevenlabs/elevenlabs-examples" target="_blank" rel="noopener noreferrer">Conversational AI Examples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/yetog/yetog/knowledge-base/edit/main/tech/ai-development.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/11/2025, 2:30:00 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a class='prev' href='awesome-list.html'>
        Awesome List
      </a></span> <span class="next"><a href='development-workflows.html'>
        Development Workflows
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="../assets/js/app.js" defer></script><script src="../assets/js/vendor.js" defer></script><script src="../assets/js/page.js" defer></script>
  </body>

</html>